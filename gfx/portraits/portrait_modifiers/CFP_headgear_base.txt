# Tags:
# rank_headgear: any headgear that signifies a certain title. crowns, pope hat etc.

# Valid culture inputs

# CULTURE_INPUT = dde_abbasid
# CULTURE_INPUT = dde_hre
# CULTURE_INPUT = byzantine
# CULTURE_INPUT = indian
# CULTURE_INPUT = mena
# CULTURE_INPUT = northern
# CULTURE_INPUT = western
# CULTURE_INPUT = western_era1
# CULTURE_INPUT = western_era2
# CULTURE_INPUT = western_era3
# CULTURE_INPUT = western_era4
# CULTURE_INPUT = steppe
# CULTURE_INPUT = fp1_norse
# CULTURE_INPUT = fp2_iberian_christian
# CULTURE_INPUT = fp2_iberian_muslim

# Valid CFP culture inputs

# CULTURE_INPUT = cfp_norse
# CULTURE_INPUT = cfp_anglo_saxon
# CULTURE_INPUT = cfp_norman
# CULTURE_INPUT = cfp_norman_sicily
# CULTURE_INPUT = cfp_hungarian
# CULTURE_INPUT = cfp_turkic
# CULTURE_INPUT = cfp_dde_turkic
# CULTURE_INPUT = cfp_oghuz
# CULTURE_INPUT = cfp_slavic
# CULTURE_INPUT = cfp_latin
# CULTURE_INPUT = cfp_iberian_christian
# CULTURE_INPUT = cfp_iberian_muslim
# CULTURE_INPUT = cfp_iranian
# CULTURE_INPUT = cfp_berber
# CULTURE_INPUT = cfp_egyptian
# CULTURE_INPUT = cfp_east_africa
# CULTURE_INPUT = cfp_central_africa
# CULTURE_INPUT = cfp_west_africa
# CULTURE_INPUT = cfp_afar
# CULTURE_INPUT = cfp_burmese
# CULTURE_INPUT = cfp_tibetan
# CULTURE_INPUT = cfp_tibetan
# CULTURE_INPUT = cfp_jewish_western
# CULTURE_INPUT = cfp_jewish_mena
# CULTURE_INPUT = cfp_jewish_andalusian
# CULTURE_INPUT = cfp_jewish

cfp_headgear_base = {

	usage = game
	selection_behavior = weighted_random
	priority = 1

## Crusader hood
	cfp_crusades_western_commoner = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_crusades_western_commoner
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		outfit_tags = { western_crusades_commoner }
		weight = {
			base = 0
			modifier = {
				add = 110
				exists = this
				OR = {
					AND = {
						has_council_position = councillor_spymaster
						highest_held_title_tier < tier_county
					}
					AND = {
						portrait_has_trait_trigger = { TRAIT = witch }
						is_landed = no
						is_lowborn = yes
					}
				}
				OR = {
					portrait_western_clothing_trigger = yes
					AND = {
						portrait_northern_clothing_trigger = yes
						NOT = { is_theocratic_lessee = yes }
					}
				}
			}
		}
	}
	
	cfp_crusades_western = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_crusades_western
				range = { 0 0.49 }
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		outfit_tags = { western_crusades_white }
		weight = {
			base = 0
			modifier = {
				add = 110
				portrait_western_crusades_trigger = yes
				NOR = {
					highest_held_title_tier > tier_county
					portrait_wear_helmet_trigger = yes
				}
			}
		}
	}
	
	cfp_crusades_western_black = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_crusades_western
				range = { 0.51 1.0 }
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		outfit_tags = { western_crusades_black }
		weight = {
			base = 0
			modifier = {
				add = 110
				portrait_western_crusades_trigger = yes
				NOR = {
					highest_held_title_tier > tier_county
					portrait_wear_helmet_trigger = yes
				}
			}
		}
	}

## Latin

	cfp_latin_commoners = {

		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_latin_common
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = cfp_latin
				}
			}
			modifier = {
				add = 20
				portrait_commoner_clothing_trigger = {
					CULTURE_INPUT = cfp_latin
				}
			}
		}
	}

	cfp_latin_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_latin_nobility
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = cfp_latin } 
			modifier = {
				add = 60
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = cfp_latin 
                }
			}
		}
	}

	cfp_latin_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_latin_high_nobility
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
            accessory = {
                mode = add
                gene = additive_headgear
                template = no_additive
                range = { 0 1 }
            }
		}
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_era2_trigger = yes
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = cfp_latin
                }
			}
		}
	}
	
## Iberian

	cfp_iberian_commoners = {

		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_iberian
				accessory = male_headgear_secular_iberian_cfp_bonnet_common_01
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = cfp_iberian_christian
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = cfp_iberian_christian
                }
			}
            modifier = {
                factor = 0  # Should NOT show up if FP2 is active since they are included in FP2 genes
                has_fp2_dlc_trigger = yes
            }
		}
	}

	cfp_iberian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_iberian
				accessory = male_headgear_secular_iberian_cfp_bonnet_low_01
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = cfp_iberian_christian } 
			modifier = {
				add = 60
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = cfp_iberian_christian 
                }
			}
            modifier = {
                factor = 0  # Should NOT show up if FP2 is active since they are included in FP2 genes
                has_fp2_dlc_trigger = yes
            }
		}
	}

	cfp_iberian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_iberian
				accessory = male_headgear_secular_iberian_cfp_bonnet_high_01
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 60
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = cfp_iberian_christian
                }
			}
            modifier = {
                factor = 0  # Should NOT show up if FP2 is active since they are included in FP2 genes
                has_fp2_dlc_trigger = yes
            }
		}
	}

## Hungarian

	cfp_hungarian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_hungarian
				accessory = male_headgear_secular_hungarian_high_nobility_01
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 60
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = cfp_hungarian
                }   
			}
		}
	}
	
## Slavic

	cfp_slavic_commoners = {

		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_ruthenian
				accessory = male_headgear_secular_ruthenian_cfp_common_01
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
				NOT = { portrait_byzantine_clothing_trigger = yes }
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = cfp_slavic
                }
			}
			modifier = {
				add = 20
				NOT = { portrait_byzantine_clothing_trigger = yes }	
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = cfp_slavic
                }
			}
			modifier = {
				add = -10
				OR = {
					portrait_commoner_clothing_trigger = {  
						CULTURE_INPUT = epe_west_slav 
					}
					portrait_commoner_clothing_trigger = {
						CULTURE_INPUT = epe_east_slav
					} 
					portrait_commoner_clothing_trigger = {
						CULTURE_INPUT = epe_south_slav
					}
					portrait_commoner_clothing_trigger = {
						CULTURE_INPUT = epe_balto_finnic
					}
				}
			}
		}
	}

	cfp_slavic_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_ruthenian
				accessory = male_headgear_secular_ruthenian_cfp_low_01
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = cfp_slavic } 
			modifier = {
				add = 60
				portrait_northern_clothing_trigger = yes
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = cfp_slavic 
                }
			}
			modifier = {
				add = -10
				OR = {
					portrait_low_nobles_clothing_trigger = {  
						CULTURE_INPUT = epe_west_slav 
					}
					portrait_low_nobles_clothing_trigger = {
						CULTURE_INPUT = epe_east_slav
					} 
					portrait_low_nobles_clothing_trigger = {
						CULTURE_INPUT = epe_south_slav
					}  
					portrait_low_nobles_clothing_trigger = {
						CULTURE_INPUT = epe_balto_finnic
					}
				}
			}
		}
	}

	cfp_slavic_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_ruthenian
				accessory = male_headgear_secular_ruthenian_cfp_high_01
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
			accessory = {
                mode = add
                gene = additive_headgear
                template = no_additive
                value = 0
            }
		}
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_northern_clothing_trigger = yes
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = cfp_slavic
                }   
			}
			modifier = {
				add = -10
				OR = {
					portrait_high_nobles_headgear_trigger = {  
						CULTURE_INPUT = epe_west_slav 
					}
					portrait_high_nobles_headgear_trigger = {
						CULTURE_INPUT = epe_east_slav
					} 
					portrait_high_nobles_headgear_trigger = {
						CULTURE_INPUT = epe_south_slav
					}  
					portrait_high_nobles_headgear_trigger = {
						CULTURE_INPUT = epe_balto_finnic
					}
				}
			}
		}
	}

	cfp_slavic_royalty_north = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_slavic_crowns
				accessory = male_headgear_secular_slavic_cfp_monomakh_01
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
			accessory = {
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 60
				is_female = no # avoids both spouses to wear the same crown, needs replacement for women
				OR = {
					portrait_northern_clothing_trigger = yes
					portrait_western_clothing_trigger = yes
				}
                portrait_royalty_trigger = {
                    CULTURE_INPUT = cfp_slavic
                }
			}
			modifier = {
				add = -10
				OR = {
					portrait_royalty_trigger = {  
						CULTURE_INPUT = epe_west_slav 
					}
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_east_slav
					} 
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_south_slav
					}  
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_balto_finnic
					}
				}
			}
		}
	}
	
	cfp_slavic_royalty_south = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_slavic_crowns
				accessory = male_headgear_secular_slavic_royalty_01
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 60
				is_female = no # avoids both spouses to wear the same crown, needs replacement for women
				portrait_byzantine_clothing_trigger = yes
                portrait_royalty_trigger = {
                    CULTURE_INPUT = cfp_slavic
                }
			}
			modifier = {
				add = -10
				OR = {
					portrait_royalty_trigger = {  
						CULTURE_INPUT = epe_west_slav 
					}
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_east_slav
					} 
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_south_slav
					}  
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_balto_finnic
					}
				}
			}
		}
	}

	cfp_slavic_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_ruthenian
				accessory = male_headgear_secular_ruthenian_cfp_imperial_01
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
			accessory = {
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_imperial_trigger = {
                    CULTURE_INPUT = cfp_slavic 
                }
			}
			modifier = {
				add = -10
				OR = {
					portrait_royalty_trigger = {  
						CULTURE_INPUT = epe_west_slav 
					}
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_east_slav
					} 
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_south_slav
					}  
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_balto_finnic
					}
				}
			}
		}
	}

## JAVANESE ##

	cfp_burmese_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = cfp_burmese
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = cfp_burmese
                }
			}
		}
	}

	cfp_burmese_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_javanese
				accessory = male_headgear_secular_java_cfp_high_nobility_01
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = cfp_burmese 
                }
			}
			modifier = {
				add = 60
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = cfp_burmese
                }   
			}
			modifier = {
				factor = 0
				is_female = yes
				OR = {
					portrait_royalty_trigger = {
						CULTURE_INPUT = cfp_burmese
					}
					portrait_imperial_trigger = {
						CULTURE_INPUT = cfp_burmese
					}
				}
			}
		}
	}

	cfp_burmese_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_javanese
				accessory = male_headgear_secular_java_cfp_royalty_01
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 60
                portrait_royalty_trigger = {
                    CULTURE_INPUT = cfp_burmese
                }   
			}
			modifier = {
				add = 60
                portrait_imperial_trigger = {
                    CULTURE_INPUT = cfp_burmese
                }
			}
			modifier = {
				factor = 0
				is_female = yes
				OR = {
					portrait_royalty_trigger = {
						CULTURE_INPUT = cfp_burmese
					}
					portrait_imperial_trigger = {
						CULTURE_INPUT = cfp_burmese
					}
				}
			}
		}
	}

## Indians


	cfp_indian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_indian_high_nobility
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				NOT = { is_female = yes }
				portrait_era4_trigger = yes
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = indian
                }   
			}
		}
	}

## Egyptians

	cfp_egyptian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_egyptian_common
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = cfp_egyptian
                }
				portrait_era4_trigger = yes
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = cfp_egyptian
                }
				portrait_era4_trigger = yes
			}
		}
	}

##  Iranians ##

	cfp_iranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_iranian_common
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = cfp_iranian
                }
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = cfp_iranian 
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = cfp_iranian
                }
			}
			modifier = {
				factor = 0
				OR = {
					portrait_commoner_clothing_trigger = {
						CULTURE_INPUT = epe_non_islamic_iranian
					}
					portrait_commoner_clothing_trigger = {
						CULTURE_INPUT = epe_eastern_non_islamic_iranian
					}				
					portrait_commoner_clothing_trigger = {
						CULTURE_INPUT = epe_hindu_iranian
					}
					portrait_commoner_clothing_trigger = {
						CULTURE_INPUT = epe_christian_iranian
					}				
				}
			}
		}
	}

## turkic ##

	cfp_turkic_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_turkic_royalty
				range = { 0 0.4 } # Yusseter
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 60
				OR = {
					portrait_imperial_trigger = {
						CULTURE_INPUT = epe_western_turk # Yusseter: cfp_turkic
					}   
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_western_turk # Yusseter: cfp_turkic
					}   
				}
				#culture = { # Yusseter
				#	OR = {
				#		this = culture:cuman
				#		this = culture:kipchak
				#		any_parent_culture_or_above = {
				#			OR = {
				#				this = culture:cuman
				#				this = culture:kipchak
				#			}
				#		}
				#		AND = {
				#			current_year >= 1066
				#			OR = {
				#				this = culture:kimek
				#				any_parent_culture_or_above = {
				#					this = culture:kimek
				#				}
				#			}
				#		}
				#	}
				#}
			}
			#modifier = {
			#	add = 20
			#	OR = {
			#		portrait_imperial_trigger = {
			#			CULTURE_INPUT = cfp_turkic
			#		}   
			#		portrait_royalty_trigger = {
			#			CULTURE_INPUT = cfp_turkic
			#		}   
			#	}
			#	culture = {
			#		OR = {
			#			this = culture:cuman
			#			this = culture:kipchak
			#			this = culture:karluk
			#			any_parent_culture_or_above = {
			#				OR = {
			#					this = culture:cuman
			#					this = culture:kipchak
			#					this = culture:karluk
			#				}
			#			}
			#		}
			#	}
			#}
			#modifier = {
			#	add = -10
			#	OR = {
			#		portrait_low_nobles_clothing_trigger = {  
			#			CULTURE_INPUT = epe_seljuk 
			#		}
			#		portrait_low_nobles_clothing_trigger = {  
			#			CULTURE_INPUT = epe_uyghur 
			#		}
			#	}
			#}
		}
	}

	# Yusseter 0
	epe_turkic_royalty = { # Yusseter
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_turkic_royalty
				range = { 0.6 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_eastern_turk 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_western_turk
                    }
				}				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				is_female = no
			
                portrait_era1_trigger = yes 				
			}
		}
	}

	eastern_turk_imperial_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_imperial
				range = { 0 0.20 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_eastern_turk 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_western_turk
                    }
				}				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
			
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_eastern_turk 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_western_turk
                    }
				}				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
			
				is_female = yes
                portrait_era1_trigger = yes 				
			}
		}
	}

	western_turk_commoners_early = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_common
				range = { 0.51 0.67 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_western_turk
                }				
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_western_turk
                }			
			}
		}
	}
	
	western_turk_commoners_late = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_common
				range = { 0.71 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_western_turk
                }
                OR = {				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }				
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_western_turk
                }
                OR = {				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }				
			}
		}
	}	

	western_turk_low_nobles_early = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_low_nobility
				range = { 0.49 0.65 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_western_turk } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_western_turk 
                }			
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_western_turk 
                }
				is_female = yes				
			}
		}
	}
	western_turk_low_nobles_late = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_low_nobility
				range = { 0.67 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_western_turk } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_western_turk 
                }
                OR = {				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_western_turk 
                }
                OR = {				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }				
				is_female = yes				
			}
		}
	}	

	western_turk_high_nobles_early = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_high_nobility
				range = { 0.49 0.60 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_western_turk
                }	
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_western_turk
                }
				is_female = yes				
			}
		}
	}
	
	western_turk_high_nobles_late = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_high_nobility
				range = { 0.63 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_western_turk
                }
                OR = {				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }				
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_western_turk
                }
				is_female = yes	
                OR = {				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }				
			}
		}
	}	

	western_turk_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_royalty
				range = { 0.51 0.73 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_western_turk
                }			
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_western_turk
                }	
				is_female = yes			
			}
		}
	}

	western_turk_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_imperial
				range = { 0.51 0.69 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_western_turk 
                }				
			}
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_western_turk 
                } 	
				is_female = yes			
			}
		}
	}

	mpo_western_turk_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mpo_mongol_commoner
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {  
                    CULTURE_INPUT = epe_western_turk 
                }
				has_mpo_dlc_trigger = yes
				
			}
		}
	}
	
	mpo_western_turk_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mpo_mongol_commoner
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_western_turk } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_western_turk 
                }
				has_mpo_dlc_trigger = yes					
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_western_turk 
                }
				has_mpo_dlc_trigger = yes					
				is_female = yes				
			}
		}
	}	

	mpo_western_turk_low_nobles_female = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mpo_mongol_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_western_turk } 
			modifier = {
				add = 100
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_western_turk 
                }
				has_mpo_dlc_trigger = yes					
				is_female = yes				
			}
		}
	}
	
	mpo_western_turk_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mpo_mongol_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 102
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_western_turk
                }
				is_female = yes
				has_mpo_dlc_trigger = yes				
			}
		}
	}	

	yb_roman_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_laurel
				range = { 0.5 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1
				portrait_epe_roman_clothing_trigger = yes
				highest_held_title_tier >= tier_empire
				portrait_religious_pagan_trigger = yes
			}
		}
	}
	# Yusseter 1
	cfp_oghuz_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_oghuz_low_nobility
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			#court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = cfp_oghuz } # Yusseter
			modifier = {
				add = 60
                portrait_commoner_clothing_trigger = { # Yusseter
                    CULTURE_INPUT = epe_seljuk
                }
                #portrait_low_nobles_clothing_trigger = {
                #    CULTURE_INPUT = cfp_oghuz
                #}
			}
			modifier = {
				add = -10
				OR = { # Yusseter
					portrait_commoner_clothing_trigger = {
						CULTURE_INPUT = epe_western_turk
					}
					portrait_commoner_clothing_trigger = {
						CULTURE_INPUT = epe_uyghur_headgear 
					}
				}
				#OR = {
				#	portrait_low_nobles_clothing_trigger = {  
				#		CULTURE_INPUT = epe_seljuk
				#	}
				#	portrait_low_nobles_clothing_trigger = {  
				#		CULTURE_INPUT = epe_uyghur 
				#	}
				#}
			}
		}
	}

	cfp_oghuz_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_oghuz_high_nobility
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_seljuk } # Yusseter
			modifier = {
				add = 101
                portrait_low_nobles_clothing_trigger = { # Yusseter
                    CULTURE_INPUT = epe_seljuk
                }
                #portrait_high_nobles_headgear_trigger = {
                #    CULTURE_INPUT = cfp_oghuz
                #}
			}
			modifier = {
				add = -51
				OR = { # Yusseter
					portrait_low_nobles_clothing_trigger = {
						CULTURE_INPUT = epe_western_turk
					}
					portrait_low_nobles_clothing_trigger = {
						CULTURE_INPUT = epe_uyghur_headgear 
					}
				}
				#OR = {
				#	portrait_high_nobles_headgear_trigger = {  
				#		CULTURE_INPUT = epe_seljuk 
				#	}
				#	portrait_high_nobles_headgear_trigger = {  
				#		CULTURE_INPUT = epe_uyghur 
				#	}
				#}
			}
		}
	}

## Africans ##

	cfp_west_african_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_west_african_low_nobility
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = cfp_west_africa } 
			modifier = {
				add = 60
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = cfp_west_africa
                }
			}
		}
	}

	cfp_west_african_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_west_african_high_nobility
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 60
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = cfp_west_africa
                }
			}
		}
	}

	cfp_east_african_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_east_african_common
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = cfp_east_africa
                }
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = cfp_east_africa 
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = cfp_east_africa
                }
			}
		}
	}

	cfp_east_african_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_east_african_low_nobility
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = cfp_east_africa } 
			modifier = {
				add = 60
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = cfp_east_africa
                }
			}
		}
	}

	cfp_east_african_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_east_african_high_nobility
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = cfp_east_africa
                }   
			}
		}
	}
	
		cfp_east_african_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_east_african_crowns
				accessory = male_headgear_secular_africa_east_cfp_royalty_01
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
                portrait_royalty_trigger = {
                    CULTURE_INPUT = cfp_east_africa 
                }
			}
		}
	}

	cfp_east_african_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_east_african_crowns
				accessory = male_headgear_secular_africa_east_cfp_imperial_01
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
                portrait_imperial_nobles_headgear_trigger = {
                    CULTURE_INPUT = cfp_east_africa 
                }
			}
		}
	}

	cfp_central_african_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_central_african_low_nobility
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = cfp_central_africa } 
			modifier = {
				add = 60
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = cfp_central_africa
                }
			}
		}
	}

	cfp_central_african_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = cfp_central_african_high_nobility
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 60
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = cfp_central_africa
                }   
			}
		}
	}

}

# Yusseter: From EPE + CFP 2025.11.13